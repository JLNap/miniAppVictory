<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéØ</text></svg>">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app">
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <section id="home" class="screen active">
      <div class="header">
        <h1>üéØ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞</h1>
        <p class="subtitle">–°—ã–≥—Ä–∞–π –æ–¥–∏–Ω –∏–ª–∏ —Å –¥—Ä—É–∑—å—è–º–∏</p>
      </div>
      <div class="home-tabs">
        <button type="button" class="tab-btn active" data-tab="solo">–û–¥–∏–Ω</button>
        <button type="button" class="tab-btn" data-tab="rooms" id="tabRooms">–° –¥—Ä—É–∑—å—è–º–∏</button>
      </div>
      <div class="tab-content tab-solo active" id="contentSolo">
        <div class="categories" id="categories"></div>
      </div>
      <div class="tab-content tab-rooms" id="contentRooms">
        <p class="tab-hint">–°–æ–∑–¥–∞–π –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π –ø–æ –∫–æ–¥—É</p>
        <button type="button" class="btn btn-create-room" id="createRoomBtn">‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
        <div class="join-room">
          <input type="text" class="join-input" id="roomCodeInput" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" maxlength="6" autocomplete="off">
          <button type="button" class="btn btn-join" id="joinRoomBtn">–í–æ–π—Ç–∏</button>
        </div>
      </div>
      <div class="footer">
        <p class="hint">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Telegram</p>
      </div>
    </section>

    <!-- –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã -->
    <section id="pick-room-category" class="screen">
      <div class="lobby-header">
        <button type="button" class="back-btn" id="pickCategoryBackBtn">‚Üê</button>
        <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã</h2>
      </div>
      <div class="categories" id="roomCategories"></div>
    </section>

    <!-- –õ–æ–±–±–∏ –∫–æ–º–Ω–∞—Ç—ã -->
    <section id="lobby" class="screen">
      <div class="lobby-header">
        <button type="button" class="back-btn" id="lobbyBackBtn">‚Üê</button>
        <h2>–ö–æ–º–Ω–∞—Ç–∞</h2>
      </div>
      <div class="room-code-block">
        <span class="room-code-label">–ö–æ–¥ –¥–ª—è –¥—Ä—É–∑–µ–π</span>
        <span class="room-code" id="roomCodeDisplay">------</span>
        <button type="button" class="btn-copy" id="copyCodeBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
      <div class="lobby-category" id="lobbyCategory"></div>
      <div class="players-block">
        <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏ (<span id="playersCount">0</span>)</h3>
        <ul class="players-list" id="playersList"></ul>
      </div>
      <div class="chat-block">
        <h3>–ß–∞—Ç</h3>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input-row">
          <input type="text" class="chat-input" id="chatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="200" autocomplete="off">
          <button type="button" class="btn-send" id="chatSendBtn">–û—Ç–ø—Ä.</button>
        </div>
      </div>
      <button type="button" class="btn btn-primary btn-start" id="startGameBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </section>

    <!-- –≠–∫—Ä–∞–Ω –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã (–æ–¥–∏–Ω–æ—á–Ω—ã–π –∏ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä) -->
    <section id="quiz" class="screen">
      <div class="quiz-header">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <p class="question-counter" id="questionCounter">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 10</p>
        <p class="multiplayer-status" id="multiplayerStatus"></p>
      </div>
      <div class="question-block">
        <h2 class="question-text" id="questionText"></h2>
        <div class="answers" id="answers"></div>
      </div>
      <button type="button" class="btn btn-next" id="nextBtn" disabled>–î–∞–ª–µ–µ</button>
    </section>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (–æ–¥–∏–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞) -->
    <section id="results" class="screen">
      <div class="results-content">
        <div class="result-emoji" id="resultEmoji">üèÜ</div>
        <h2 id="resultTitle">–û—Ç–ª–∏—á–Ω–æ!</h2>
        <p class="score-text" id="scoreText">–¢—ã –Ω–∞–±—Ä–∞–ª 8 –∏–∑ 10</p>
        <p class="score-percent" id="scorePercent">80%</p>
        <button type="button" class="btn btn-primary" id="playAgainBtn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        <button type="button" class="btn btn-secondary" id="backToMenuBtn">–í –º–µ–Ω—é</button>
      </div>
    </section>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–Ω–∞—Ç—ã (—Ç–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤) -->
    <section id="room-results" class="screen">
      <div class="results-content">
        <h2>üèÜ –ò—Ç–æ–≥–∏</h2>
        <ol class="leaderboard" id="leaderboard"></ol>
        <button type="button" class="btn btn-secondary" id="roomResultsBackBtn">–í –º–µ–Ω—é</button>
      </div>
    </section>
  </div>

  <script src="js/supabase-config.js?v=2"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
  <script src="js/quiz-data.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
